(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{301:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u}));var r=n(3),i=n.n(r),a=n(26),s=n(8);function c(t){return o.apply(this,arguments)}function o(){return(o=Object(s.a)(i.a.mark((function t(e){var n,r,s,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.transactionsAndSigners,r=e.wallet,s=e.connection,t.next=3,s.getRecentBlockhash("max");case 3:return c=t.sent.blockhash,n.forEach((function(t){var e=t.transaction,n=t.signers,i=void 0===n?[]:n;e.recentBlockhash=c,e.setSigners.apply(e,[r.publicKey].concat(Object(a.a)(i.map((function(t){return t.publicKey}))))),(null===i||void 0===i?void 0:i.length)>0&&e.partialSign.apply(e,Object(a.a)(i))})),t.next=7,r.signAllTransactions(n.map((function(t){return t.transaction})));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(t){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(i.a.mark((function t(e){var n,r,a,c,o,u,l,d,f,v,g,y,x;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.signedTransaction,r=e.connection,a=e.timeout,c=void 0===a?15e3:a,o=n.serialize(),u=b(),l=0,t.next=6,r.sendRawTransaction(o,{skipPreflight:!0});case 6:return d=t.sent,f=!1,Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f||!(b()-u<c)){t.next=6;break}return r.sendRawTransaction(o,{skipPreflight:!0}),t.next=4,m(500);case 4:t.next=0;break;case 6:case"end":return t.stop()}}),t)})))(),t.prev=9,t.next=12,h(d,c,r,"recent",!0);case 12:if(v=t.sent){t.next=15;break}throw new Error("Timed out awaiting confirmation on transaction");case 15:if(!v.err){t.next=17;break}throw new Error("Transaction failed: Custom instruction error");case 17:l=(null===v||void 0===v?void 0:v.slot)||0,t.next=44;break;case 20:if(t.prev=20,t.t0=t.catch(9),!t.t0.timeout){t.next=24;break}throw new Error("Timed out awaiting confirmation on transaction");case 24:return g=null,t.prev=25,t.next=28,p(r,n,"single");case 28:g=t.sent.value,t.next=33;break;case 31:t.prev=31,t.t1=t.catch(25);case 33:if(!g||!g.err){t.next=44;break}if(!g.logs){t.next=43;break}y=g.logs.length-1;case 36:if(!(y>=0)){t.next=43;break}if(!(x=g.logs[y]).startsWith("Program log: ")){t.next=40;break}throw new Error("Transaction failed: "+x.slice("Program log: ".length));case 40:--y,t.next=36;break;case 43:throw new Error(JSON.stringify(g.err));case 44:return t.prev=44,f=!0,t.finish(44);case 47:return t.abrupt("return",{txid:d,slot:l});case 48:case"end":return t.stop()}}),t,null,[[9,20,44,47],[25,31]])})))).apply(this,arguments)}function p(t,e,n){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(i.a.mark((function t(e,n,r){var a,s,c,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._recentBlockhash(e._disableBlockhashCaching);case 2:return n.recentBlockhash=t.sent,a=n.serializeMessage(),s=n._serialize(a),c=s.toString("base64"),o=[c,{encoding:"base64",commitment:r}],t.next=10,e._rpcRequest("simulateTransaction",o);case 10:if(!(u=t.sent).error){t.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return t.abrupt("return",u.result);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t,e,n){return f.apply(this,arguments)}function f(){return(f=Object(s.a)(i.a.mark((function t(e,n,r){var a,c,o,u,l,p=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:"recent",c=p.length>4&&void 0!==p[4]&&p[4],o=!1,u={slot:0,confirmations:0,err:null},l=0,t.next=7,new Promise(function(){var t=Object(s.a)(i.a.mark((function t(p,d){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout((function(){o||(o=!0,d({timeout:!0}))}),n);try{l=r.onSignature(e,(function(t,e){o=!0,u={err:t.err,slot:e.slot,confirmations:0},t.err?d(u):p(u)}),a)}catch(h){o=!0}case 2:if(o||!c){t.next=8;break}return Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.getSignatureStatuses([e]);case 3:n=t.sent,u=n&&n.value[0],o||u&&(u.err?(o=!0,d(u.err)):u.confirmations&&(o=!0,p(u))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))(),t.next=6,m(2e3);case 6:t.next=2;break;case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 7:return u=t.sent,r._signatureSubscriptions[l]&&r.removeSignatureListener(l),o=!0,t.abrupt("return",u);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var b=function(){return(new Date).getTime()/1e3};function m(t){return new Promise((function(e){return setTimeout(e,t)}))}},484:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return x}));var r,i=n(3),a=n.n(i),s=n(8),c=n(13),o=n(39),u=n(485),l=n(301),p="metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s";!function(t){t[t.Uninitialized=0]="Uninitialized",t[t.MetadataV1=4]="MetadataV1",t[t.EditionV1=1]="EditionV1",t[t.MasterEditionV1=2]="MasterEditionV1",t[t.MasterEditionV2=6]="MasterEditionV2",t[t.EditionMarker=7]="EditionMarker"}(r||(r={}));var d=function t(e){Object(c.a)(this,t),this.address=void 0,this.verified=void 0,this.share=void 0,this.address=e.address,this.verified=e.verified,this.share=e.share},h=function t(e){Object(c.a)(this,t),this.name=void 0,this.symbol=void 0,this.uri=void 0,this.sellerFeeBasisPoints=void 0,this.creators=void 0,this.name=e.name,this.symbol=e.symbol,this.uri=e.uri,this.sellerFeeBasisPoints=e.sellerFeeBasisPoints,this.creators=e.creators},f=function t(e){Object(c.a)(this,t),this.key=void 0,this.updateAuthority=void 0,this.mint=void 0,this.data=void 0,this.primarySaleHappened=void 0,this.isMutable=void 0,this.masterEdition=void 0,this.edition=void 0,this.key=r.MetadataV1,this.updateAuthority=e.updateAuthority,this.mint=e.mint,this.data=e.data,this.primarySaleHappened=e.primarySaleHappened,this.isMutable=e.isMutable},b=new Map([[function t(e){Object(c.a)(this,t),this.key=void 0,this.supply=void 0,this.maxSupply=void 0,this.printingMint=void 0,this.oneTimePrintingAuthorizationMint=void 0,this.key=r.MasterEditionV1,this.supply=e.supply,this.maxSupply=e.maxSupply,this.printingMint=e.printingMint,this.oneTimePrintingAuthorizationMint=e.oneTimePrintingAuthorizationMint},{kind:"struct",fields:[["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}],["printingMint","pubkey"],["oneTimePrintingAuthorizationMint",[32]]]}],[function t(e){Object(c.a)(this,t),this.key=void 0,this.supply=void 0,this.maxSupply=void 0,this.key=r.MasterEditionV2,this.supply=e.supply,this.maxSupply=e.maxSupply},{kind:"struct",fields:[["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}]]}],[function t(e){Object(c.a)(this,t),this.key=void 0,this.parent=void 0,this.edition=void 0,this.key=r.EditionV1,this.parent=e.parent,this.edition=e.edition},{kind:"struct",fields:[["key","u8"],["parent",[32]],["edition","u64"]]}],[h,{kind:"struct",fields:[["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[d]}]]}],[d,{kind:"struct",fields:[["address",[32]],["verified","u8"],["share","u8"]]}],[f,{kind:"struct",fields:[["key","u8"],["updateAuthority",[32]],["mint",[32]],["data",h],["primarySaleHappened","u8"],["isMutable","u8"]]}],[function t(e){Object(c.a)(this,t),this.key=void 0,this.ledger=void 0,this.key=r.EditionMarker,this.ledger=e.ledger},{kind:"struct",fields:[["key","u8"],["ledger",[31]]]}]]);function m(t){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.deserializeUnchecked(b,f,e),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t,e,n){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(a.a.mark((function e(n,r,i){var s,c,o,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},i&&("string"===typeof i?c=i:(c=i.commitment,i.dataSlice&&(s.dataSlice=i.dataSlice),i.filters&&(s.filters=i.filters))),o=n._buildArgs([r],c,"base64",s),e.next=5,n._rpcRequest("getProgramAccounts",o);case 5:return u=e.sent,l=u.result.map((function(e){return{account:{data:t.from(e.account.data[0],"base64"),executable:e.account.executable,lamports:e.account.lamports,owner:e.account.owner},pubkey:e.pubkey}})),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(t,e,n,r,i){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(a.a.mark((function t(e,n,r,i,s){var c,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),t.next=3,j(r,e);case 3:return c=t.sent,console.log("Found ".concat(c.length," nft's minted by candy machine ").concat(r)),s("Found ".concat(c.length," nft's minted by candy machine ").concat(r)),t.next=8,w(c,r,n.publicKey.toBase58());case 8:if(o=t.sent,console.log("Found ".concat(o.length," nft's to sign by  ").concat(n.publicKey.toBase58())),s("Found ".concat(o.length," nft's to sign by  ").concat(n.publicKey.toBase58())),0!=o.length){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,P(e,n,o,i,s);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t,e){return O.apply(this,arguments)}function O(){return(O=Object(s.a)(a.a.mark((function t(e,n){var r,i,s,c,o,u,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,g(n,p,{filters:[{memcmp:{offset:326,bytes:e}}]});case 3:r=t.sent,i=[],s=0;case 6:if(!(s<r.length)){t.next=17;break}return c=r[s],t.next=10,m(c.account.data);case 10:o=t.sent,u=c.pubkey,l=[o,u],i.push(l);case 14:s++,t.next=6;break;case 17:return t.abrupt("return",i);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t,e,n){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(a.a.mark((function t(e,n,r){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=[],e.forEach((function(t){var e=!1,a=!0;t[0].data.creators.forEach((function(t){new o.PublicKey(t.address).toBase58()==n&&1===t.verified&&(e=!0),new o.PublicKey(t.address).toBase58()==r&&0===t.verified&&(a=!1)})),e&&!a&&i.push(t)})),t.abrupt("return",i);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(t,e,n,r,i){return E.apply(this,arguments)}function E(){return(E=Object(s.a)(a.a.mark((function t(e,n,r,i,s){var c,o,u,p,d,h,f,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=0,o=[];case 2:if(!(r.length>0)){t.next=18;break}return console.log("Signing metadata"),s("Signing metadata.."),u=i,r.length<i&&(u=r.length),p=r.splice(0,u),c+=u,t.next=11,C(500);case 11:return t.next=13,M(p,e,n);case 13:d=t.sent,o.push(d),console.log("Processed ".concat(c," nfts")),t.next=2;break;case 18:return console.log("Signing all txs.."),t.next=21,Object(l.b)({transactionsAndSigners:o,wallet:n,connection:e});case 21:h=t.sent,f=0;case 23:if(!(f<h.length)){t.next=30;break}return b=h[f],t.next=27,Object(l.a)({signedTransaction:b,connection:e});case 27:f++,t.next=23;break;case 30:console.log("Finished signing metadata.."),s("Finished signing metadata..");case 32:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(t,e,n){return T.apply(this,arguments)}function T(){return(T=Object(s.a)(a.a.mark((function t(e,n,r){var i,s,c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],s=new o.Transaction,c=0;case 3:if(!(c<e.length)){t.next=10;break}return u=e[c],t.next=7,B(u[1],r.publicKey.toBase58(),s.instructions);case 7:c++,t.next=3;break;case 10:return t.abrupt("return",{transaction:s,signers:i});case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t,e,n){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(a.a.mark((function e(n,r,i){var s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new o.PublicKey(p),s=t.from([7]),c=[{pubkey:new o.PublicKey(n),isSigner:!1,isWritable:!0},{pubkey:new o.PublicKey(r),isSigner:!0,isWritable:!1}],i.push({keys:c,programId:p,data:s});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(t){return new Promise((function(e){return setTimeout(e,t)}))}}).call(this,n(11).Buffer)},504:function(t,e,n){},505:function(t,e,n){},506:function(t,e){},507:function(t,e){},523:function(t,e){},524:function(t,e){},550:function(t,e){},643:function(t,e){},645:function(t,e){},656:function(t,e){},660:function(t,e){},662:function(t,e){},672:function(t,e){},674:function(t,e){},701:function(t,e){},703:function(t,e){},708:function(t,e){},710:function(t,e){},716:function(t,e){},718:function(t,e){},730:function(t,e){},733:function(t,e){},741:function(t,e){},748:function(t,e,n){"use strict";n.r(e);var r,i,a,s=n(0),c=n.n(s),o=n(25),u=n.n(o),l=(n(504),n(505),n(3)),p=n.n(l),d=n(8),h=n(23),f=n(18),b=n(229),m=n(232),v=n(774),g=n(777),y=n(228),x=n(96),k=n(215),j=n(484),O=n(489),w=n(45),S=Object(m.a)(k.WalletDialogButton)(r||(r=Object(b.a)([""]))),P=m.a.div(i||(i=Object(b.a)([""]))),E=Object(m.a)(v.a)(a||(a=Object(b.a)([""]))),M=[{value:"https://api.devnet.solana.com",label:"devnet"},{value:"https://api.mainnet-beta.solana.com",label:"mainnet"}],T={option:function(t,e){return Object(f.a)(Object(f.a)({},t),{},{borderBottom:"1px dotted pink",color:e.isSelected?"red":"blue"})}},B=function(t){var e=Object(x.useWallet)(),n=new y.b.Connection("https://api.devnet.solana.com"),r=Object(s.useState)(String),i=Object(h.a)(r,2),a=i[0],c=i[1],o=Object(s.useState)(String),u=Object(h.a)(o,2),l=u[0],f=u[1],b=function(t){c(t)},m=function(){var t=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b("signing.."),t.prev=1,""!=l){t.next=5;break}return b("please enter candy address.."),t.abrupt("return");case 5:return t.next=7,Object(j.a)(n,e,l,10,b);case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),b("could not sign..");case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(w.jsxs)("main",{className:"mainc",children:[Object(w.jsx)("h4",{children:"Candy Machine Metadata Signer"}),Object(w.jsx)("div",{className:"selectorC",children:Object(w.jsx)(O.a,{styles:T,options:M})}),Object(w.jsx)("div",{className:"cndymch",children:Object(w.jsx)(g.a,{onChange:function(t){f(t.target.value)},className:"textfield",id:"outlined-basic",label:"Candy machine id",variant:"outlined",placeholder:"Candy machine id"})}),Object(w.jsx)("div",{className:"signBtn",children:Object(w.jsx)(P,{children:e.connected?Object(w.jsxs)(E,{onClick:m,variant:"contained",children:[" ","SIGN"]}):Object(w.jsx)(S,{children:"Connect Wallet"})})}),Object(w.jsx)("div",{className:"light",children:a})]})},A=n(39),C=n(233),_=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SOLANA_NETWORK,F=function(){var t=Object(s.useMemo)((function(){return Object(A.clusterApiUrl)(_)}),[]),e=Object(s.useMemo)((function(){return[Object(C.getPhantomWallet)(),Object(C.getSolflareWallet)(),Object(C.getSolletWallet)()]}),[]);return Object(w.jsx)(x.ConnectionProvider,{endpoint:t,children:Object(w.jsx)(x.WalletProvider,{wallets:e,autoConnect:!0,children:Object(w.jsx)(k.WalletDialogProvider,{children:Object(w.jsx)(B,{})})})})},W=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,780)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),r(t),i(t),a(t),s(t)}))};u.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(F,{})}),document.getElementById("root")),W()}},[[748,1,2]]]);
//# sourceMappingURL=main.5403c109.chunk.js.map